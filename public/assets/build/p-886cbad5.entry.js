import{r as t,h as e,H as n,g as a}from"./p-44118c4f.js";const i=class{constructor(e){t(this,e),this.bcolor="#fff",this.name="cuentaBancaria",this.value="",this.values=""}render(){return this.getComponentHTML()}namesHandler(){this.assignNames()}handleValue(t){this.setDefaultValue(),this.values=t}errorsHandler(){this.assignErrors()}componentDidLoad(){this.assignColor(),this.getAllInputs(),this.addInputsListeners(),this.assignNames(),this.assignErrors(),this.value&&this.setDefaultValue(),this.setHiddenValue()}setDefaultValue(){this.inputs.forEach(((t,e)=>{t.value=this.bankAccountFormat(this.value)?this.bankAccountFormat(this.value)[e]:""}))}setHiddenValue(){if(this.inputs){const t=[];this.inputs.forEach((e=>t.push(e.value))),this.values=t.join(""),this.value&&(this.value=t.join(""))}}addInputsListeners(){this.inputs.forEach(((t,e)=>{this.addKeydownListener(t),this.addKeyupListener(t,e),this.addPasteListener(t),this.addchangeListener(t)}))}addKeydownListener(t){t.addEventListener("keydown",(t=>this.onKeyDown(t)))}addchangeListener(t){t.addEventListener("change",(()=>this.setHiddenValue()))}addKeyupListener(t,e){t.addEventListener("keyup",(t=>this.onKeyUp(t,e)))}addPasteListener(t){t.addEventListener("paste",(t=>this.onPaste(t)))}assignColor(){this.bankAccountElement.style.backgroundColor=this.bcolor}getAllInputs(){this.inputs=this.bankAccountElement.querySelectorAll("input:not([type='hidden'])")}onKeyDown(t){t.keyCode>=187&&t.keyCode<=190&&t.preventDefault()}onKeyUp(t,e){this.isCompletedAndNotAccount(t)&&this.inputs[e+1].focus()}getSubstringAccountWithoutIbanData(t){return{entidad:t.substr(0,4),sucursal:t.substr(4,4),dc:t.substr(8,2),cuenta:t.substr(10)}}getDataAccountAndIbanIfIsInMaximumLength(t){return this.isInMaximumLength(t.length)?{iban:t.substr(0,4),account:t.substr(4)}:{account:t.substr(4)}}bankAccountFormat(t){const e=this.getLimitForDataLength(t);if(this.errorMessage="",this.isInLengthRange(t.length)){const e=this.getDataAccountAndIbanIfIsInMaximumLength(t),n=this.getSubstringAccountWithoutIbanData(e.account);return[e.iban||"",n.entidad,n.sucursal,n.dc,n.cuenta]}if(t.length&&!this.isInLengthRange(t.length))throw this.errorMessage=(t=>`El número de cuenta ${t} la longitud permitida`)(e),new Error(this.errorMessage)}getLimitForDataLength(t){let e="";return t.length>24?e="excede":t.length<24&&t.length>=1&&(e="es menor a"),e}assignErrors(){this.clearErrors();const t=[];this.errors&&this.inputs&&(this.assignCorrectFieldErrors(t),this.setTextfieldErrorsIfExistsErrors(t)),this.setTextfieldErrorIfMessageErrorAndNoErrors(t)}clearErrors(){this.inputs&&this.inputs.forEach((t=>{t.parentElement.parentElement.classList.remove("error")}))}setTextfieldErrorIfMessageErrorAndNoErrors(t){this.isEmptyErrorsAndErrorMessageAndInputsExists(t)&&this.bankAccountElement.querySelectorAll("mm-textfield").forEach((t=>{t.classList.add("error")}))}setTextfieldErrorsIfExistsErrors(t){t&&t.forEach((t=>{t.parentElement.parentElement.classList.add("error")}))}isEmptyErrorsAndErrorMessageAndInputsExists(t){return 0===t.length&&this.errorMessage&&this.inputs.length>0}assignCorrectFieldErrors(t){this.errors.forEach((e=>{const n=Array.from(this.inputs).find((t=>t.name===e));n&&t.push(n)}))}onPaste(t){const e=t.clipboardData.getData("text");if(!e)return;const n=this.bankAccountFormat(e);n&&n.length>0&&this.inputs.forEach(((t,e)=>t.value=n[e])),this.setHiddenValue(),t.stopPropagation(),t.preventDefault()}assignNames(){this.inputs.forEach(((t,e)=>{if(this.names){const n=Array.isArray(this.names)?this.names:this.names.replace(/\s/g,"").split(",");n[e]?t.name=n[e]:t.removeAttribute("name")}else t.name=t.id}))}isCompleted(t){return t.value.length>=t.maxLength}isCompletedAndNotAccount(t){return this.isCompleted(t.target)&&"cuenta"!==t.target.id}isInLengthRange(t){return this.isInMinimumLength(t)||this.isInMaximumLength(t)}isInMinimumLength(t){return 20===t}isInMaximumLength(t){return 24===t}getComponentHTML(){return e(n,{"data-value":this.values},e("div",{class:"bank-account-container"},e("input",{type:"hidden",value:this.values,name:this.name}),e("div",null,e("mm-textfield",{mandatory:this.allMandatory,label:"IBAN",disabled:this.disabled},e("input",{value:"",type:"text",placeholder:"ESXX",maxlength:"4",id:"iban",disabled:this.disabled,autocomplete:"off"})),e("mm-textfield",{mandatory:this.mandatory||this.allMandatory,label:"Entidad",disabled:this.disabled},e("input",{value:"",type:"number",placeholder:"1234",maxlength:"4",id:"entidad",disabled:this.disabled,autocomplete:"off"})),e("mm-textfield",{mandatory:this.mandatory||this.allMandatory,label:"Sucursal",disabled:this.disabled},e("input",{value:"",type:"number",placeholder:"5678",maxlength:"4",id:"sucursal",disabled:this.disabled,autocomplete:"off"})),e("mm-textfield",{mandatory:this.mandatory||this.allMandatory,label:"DC",class:"control",disabled:this.disabled},e("input",{value:"",type:"number",placeholder:"00",maxlength:"2",id:"dc",disabled:this.disabled,autocomplete:"off"})),e("mm-textfield",{mandatory:this.mandatory||this.allMandatory,label:"Nº cuenta",class:"account",disabled:this.disabled},this.renderHelperIcon(),e("input",{value:"",type:"tel",placeholder:"0123456789",maxlength:"10",id:"cuenta",disabled:this.disabled,autocomplete:"off"}))),this.renderHelperInfo(),this.errorMessage&&e("small",{class:"message-err"},this.errorMessage)))}renderHelperIcon(){return this.helperIcon?e("div",{class:"bank-account-container__helper-icon"},e("mm-helper",{type:"icon","tooltip-text":this.helperIcon})):null}renderHelperInfo(){return this.helperInfo&&!this.errorMessage?e("mm-helper",{"info-text":this.helperInfo}):null}get bankAccountElement(){return a(this)}static get watchers(){return{names:["namesHandler"],value:["handleValue"],errors:["errorsHandler"],errorMessage:["errorsHandler"]}}};i.style=":root{--grey_050:#fcfcfa;--grey_100:#f9f9f9;--grey_200:#f2f2f2;--grey_300:#e9ecf0;--grey_400:#dfe1e2;--grey_500:#ccc;--grey_600:#a0aab5;--grey_700:#89858e;--grey_750:#73757b;--grey_800:#61616a;--grey_900:#55494c;--grey_950:#2a2425;--brand_accent_100:#f2fafd;--brand_accent_200:#e3f2fd;--brand_accent_300:#c1e3fc;--brand_accent_500:#00a4e3;--brand_accent_750:#0068a3;--brand_accent_800:#004a93;--primary_500:#3269b3;--primary_900:#283c57;--full_white:#fff;--full_black:#000;--action_300:#e56aa8;--action_500:#c9337d;--action_800:#750e70;--action_900:#440d7f;--status_critical_100:#fcded4;--status_critical_500:#d62c42;--status_critical_800:#660837;--status_warning_100:#fff2d6;--status_warning_500:#ffae33;--status_warning_800:#66380f;--status_success_100:#e6f8e0;--status_success_500:#42804a;--status_success_800:#0c3d25;--status_info_100:#e5fafe;--status_info_500:#7cc3f4;--status_info_800:#004a93;--client_platinium:#625951;--client_gold_500:#e0af31;--client_gold_800:#66380f;--client_basic:#3269b3;--client_hogar:#ffffff;--enviroment_dev:#f118a7;--enviroment_acp:#68d568;--enviroment_prf:#7cc3f4;--enviroment_uat:#ffd400;--segmentoa_500:#7aebb7;--segmentoa_800:#006060;--segmentob_500:#9ad7ff;--segmentob_800:#3a539b;--segmentoc_500:#e38b63;--segmentoc_800:#600000;--segmentod_500:#d999f2;--segmentod_800:#561b8d;--cca_500:#f2bf2e;--cca_800:#ff6e33}mm-bank-account .bank-account-container{max-width:100%}mm-bank-account .bank-account-container__helper-icon{position:absolute;top:-20px;right:-5px}mm-bank-account .bank-account-container>div{display:flex;width:100%;max-width:100%}mm-bank-account .bank-account-container mm-textfield{width:100%;min-width:3rem;max-width:3.25rem;display:inline-block;margin-right:0.375rem}mm-bank-account .bank-account-container mm-textfield.error input{padding-right:0}mm-bank-account .bank-account-container mm-textfield.error .icon-err{display:none}mm-bank-account .bank-account-container mm-textfield.mandatory label{max-width:calc(100% - 12px)}mm-bank-account .bank-account-container mm-textfield input{padding-left:5px;text-transform:uppercase}mm-bank-account .bank-account-container mm-textfield:last-child{padding-right:0}mm-bank-account .bank-account-container mm-textfield.control{width:100%;max-width:2rem;min-width:2rem}mm-bank-account .bank-account-container mm-textfield.account{width:100%;max-width:6.5rem;min-width:5.875rem}mm-bank-account .bank-account-container .message-err{color:var(--status_critical_500, #d62c42);line-height:18px;margin-top:0.5rem;text-align:left}@media screen and (min-width: 768px){mm-bank-account .bank-account-container{width:24.375rem}mm-bank-account .bank-account-container mm-textfield{min-width:4.0625rem;margin-right:0.625rem}mm-bank-account .bank-account-container mm-textfield.control{max-width:2.8125rem;min-width:2.8125rem}mm-bank-account .bank-account-container mm-textfield.account{min-width:6.875rem;max-width:6.875rem}mm-bank-account .bank-account-container mm-textfield input{padding-left:0.75rem}mm-bank-account .bank-account-container mm-textfield.error input{padding:0 0.75rem}mm-bank-account .bank-account-container mm-textfield.error label{color:var(--status_critical_500, #d62c42)}}";export{i as mm_bank_account}